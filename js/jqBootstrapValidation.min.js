(function($){var createdElements=[];var defaults={options:{prependExistingHelpBlock:!1,sniffHtml:!0,var $this=$(this),$controlGroup=$this.parents(".form-group, .checkbox").first(),$helpBlock=$controlGroup.find(".help-block").first(),$form=$this.parents("form").first(),validatorNames=[];if(!$helpBlock.length&&settings.options.autoAdd&&settings.options.autoAdd.helpBlocks){$helpBlock=$('<div class="help-block" />');$controlGroup.append($helpBlock);createdElements.push($helpBlock[0])}
if(settings.options.sniffHtml){var message="";if($this.attr("pattern")!==undefined){message="Not in the expected format<!-- data-validation-pattern-message to override -->";if($this.data("validationPatternMessage")){message=$this.data("validationPatternMessage")}
$this.data("validationPatternMessage",message);$this.data("validationPatternRegex",$this.attr("pattern"))}
if($this.attr("max")!==undefined||$this.attr("aria-valuemax")!==undefined){var max=($this.attr("max")!==undefined?$this.attr("max"):$this.attr("aria-valuemax"));message="Too high: Maximum of '"+max+"'<!-- data-validation-max-message to override -->";if($this.data("validationMaxMessage")){message=$this.data("validationMaxMessage")}
$this.data("validationMaxMessage",message);$this.data("validationMaxMax",max)}
if($this.attr("min")!==undefined||$this.attr("aria-valuemin")!==undefined){var min=($this.attr("min")!==undefined?$this.attr("min"):$this.attr("aria-valuemin"));message="Too low: Minimum of '"+min+"'<!-- data-validation-min-message to override -->";if($this.data("validationMinMessage")){message=$this.data("validationMinMessage")}
$this.data("validationMinMessage",message);$this.data("validationMinMin",min)}
if($this.attr("maxlength")!==undefined){message="Too long: Maximum of '"+$this.attr("maxlength")+"' characters<!-- data-validation-maxlength-message to override -->";if($this.data("validationMaxlengthMessage")){message=$this.data("validationMaxlengthMessage")}
$this.data("validationMaxlengthMessage",message);$this.data("validationMaxlengthMaxlength",$this.attr("maxlength"))}
if($this.attr("minlength")!==undefined){message="Too short: Minimum of '"+$this.attr("minlength")+"' characters<!-- data-validation-minlength-message to override -->";if($this.data("validationMinlengthMessage")){message=$this.data("validationMinlengthMessage")}
$this.data("validationMinlengthMessage",message);$this.data("validationMinlengthMinlength",$this.attr("minlength"))}
if($this.attr("required")!==undefined||$this.attr("aria-required")!==undefined){message=settings.builtInValidators.required.message;if($this.data("validationRequiredMessage")){message=$this.data("validationRequiredMessage")}
$this.data("validationRequiredMessage",message)}
if($this.attr("type")!==undefined&&$this.attr("type").toLowerCase()==="number"){message=settings.builtInValidators.number.message;if($this.data("validationNumberMessage")){message=$this.data("validationNumberMessage")}
$this.data("validationNumberMessage",message)}
if($this.attr("type")!==undefined&&$this.attr("type").toLowerCase()==="email"){message="Not a valid email address<!-- data-validator-validemail-message to override -->";if($this.data("validationValidemailMessage")){message=$this.data("validationValidemailMessage")}else if($this.data("validationEmailMessage")){message=$this.data("validationEmailMessage")}
$this.data("validationValidemailMessage",message)}
if($this.attr("minchecked")!==undefined){message="Not enough options checked; Minimum of '"+$this.attr("minchecked")+"' required<!-- data-validation-minchecked-message to override -->";if($this.data("validationMincheckedMessage")){message=$this.data("validationMincheckedMessage")}
$this.data("validationMincheckedMessage",message);$this.data("validationMincheckedMinchecked",$this.attr("minchecked"))}
if($this.attr("maxchecked")!==undefined){message="Too many options checked; Maximum of '"+$this.attr("maxchecked")+"' required<!-- data-validation-maxchecked-message to override -->";if($this.data("validationMaxcheckedMessage")){message=$this.data("validationMaxcheckedMessage")}
$this.data("validationMaxcheckedMessage",message);$this.data("validationMaxcheckedMaxchecked",$this.attr("maxchecked"))}}
if($this.data("validation")!==undefined){validatorNames=$this.data("validation").split(",")}}})}
return!1}},ajax:{name:"ajax",init:function($this,name){return{validatorName:name,url:$this.data("validation"+name+"Ajax"),lastValue:$this.val(),lastValid:!0,lastFinished:!0}},validate:function($this,value,validator){if(""+validator.lastValue===""+value&&validator.lastFinished===!0){return validator.lastValid===!1}
if(validator.lastFinished===!0){validator.lastValue=value;validator.lastValid=!0;validator.lastFinished=!1;$.ajax({url:validator.url,data:"value="+value+"&field="+$this.attr("name"),dataType:"json",success:function(data){if(""+validator.lastValue===""+data.value){validator.lastValid=!!(data.valid);if(data.message){validator.message=data.message}
validator.lastFinished=!0;$this.data("validation"+validator.validatorName+"Message",validator.message);setTimeout(function(){$this.trigger("change.validation")},1)}})}
return!1}},regex:{name:"regex",init:function($this,name){return{regex:regexFromString($this.data("validation"+name+"Regex"))}},validate:function($this,value,validator){return(!validator.regex.test(value)&&!validator.negative)||(validator.regex.test(value)&&validator.negative)}},required:{name:"required",init:function($this,name){return{}},validate:function($this,value,validator){return!!(value.length===0&&!validator.negative)||!!(value.length>0&&validator.negative)},blockSubmit:!0},match:{name:"match",init:function($this,name){var element=$this.parents("form").first().find("[name=\""+$this.data("validation"+name+"Match")+"\"]").first();element.bind("validation.validation",function(){$this.trigger("change.validation",{submitting:!0})});return{"element":element}},validate:function($this,value,validator){return(value!==validator.element.val()&&!validator.negative)||(value===validator.element.val()&&validator.negative)},blockSubmit:!0},max:{name:"max",init:function($this,name){return{max:$this.data("validation"+name+"Max")}},validate:function($this,value,validator){return(parseFloat(value,10)>parseFloat(validator.max,10)&&!validator.negative)||(parseFloat(value,10)<=parseFloat(validator.max,10)&&validator.negative)}},min:{name:"min",init:function($this,name){return{min:$this.data("validation"+name+"Min")}},validate:function($this,value,validator){return(parseFloat(value)<parseFloat(validator.min)&&!validator.negative)||(parseFloat(value)>=parseFloat(validator.min)&&validator.negative)}},maxlength:{name:"maxlength",init:function($this,name){return{maxlength:$this.data("validation"+name+"Maxlength")}},validate:function($this,value,validator){return((value.length>validator.maxlength)&&!validator.negative)||((value.length<=validator.maxlength)&&validator.negative)}},minlength:{name:"minlength",init:function($this,name){return{minlength:$this.data("validation"+name+"Minlength")}},validate:function($this,value,validator){return((value.length<validator.minlength)&&!validator.negative)||((value.length>=validator.minlength)&&validator.negative)}},maxchecked:{name:"maxchecked",init:function($this,name){var elements=$this.parents("form").first().find("[name=\""+$this.attr("name")+"\"]");elements.bind("click.validation",function(){$this.trigger("change.validation",{includeEmpty:!0})});return{maxchecked:$this.data("validation"+name+"Maxchecked"),elements:elements}},validate:function($this,value,validator){return(validator.elements.filter(":checked").length>validator.maxchecked&&!validator.negative)||(validator.elements.filter(":checked").length<=validator.maxchecked&&validator.negative)},blockSubmit:!0},minchecked:{name:"minchecked",init:function($this,name){var elements=$this.parents("form").first().find("[name=\""+$this.attr("name")+"\"]");elements.bind("click.validation",function(){$this.trigger("change.validation",{includeEmpty:!0})});return{minchecked:$this.data("validation"+name+"Minchecked"),elements:elements}},validate:function($this,value,validator){return(validator.elements.filter(":checked").length<validator.minchecked&&!validator.negative)||(validator.elements.filter(":checked").length>=validator.minchecked&&validator.negative)},blockSubmit:!0}},builtInValidators:{email:{name:"Email",type:"shortcut",shortcut:"validemail"},validemail:{name:"Validemail",type:"regex",regex:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\\.[A-Za-z]{2,10}",message:"Not a valid email address<!-- data-validator-validemail-message to override -->"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password<!-- data-validator-paswordagain-message to override -->"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},number:{name:"Number",type:"regex",regex:"([+-]?\\\d+(\\\.\\\d*)?([eE][+-]?[0-9]+)?)?",message:"Must be a number<!-- data-validator-number-message to override -->"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\\d+",message:"No decimal places allowed<!-- data-validator-integer-message to override -->"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number<!-- data-validator-positivenumber-message to override -->"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number<!-- data-validator-negativenumber-message to override -->"},required:{name:"Required",type:"required",message:"This is required<!-- data-validator-required-message to override -->"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option<!-- data-validation-checkone-message to override -->"}}};var formatValidatorName=function(name){return name.toLowerCase().replace(/(^|\s)([a-z])/g,function(m,p1,p2){return p1+p2.toUpperCase()})};var getValue=function($this){